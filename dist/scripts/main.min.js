var myPlaces=[{coords:{lat:37.781362,lng:-122.41698},name:"Philz Coffee"},{coords:{lat:37.827603,lng:-122.422895},name:"Alcatraz Island"},{coords:{lat:37.808817,lng:-122.4098},name:"PIER 39"},{coords:{lat:37.820081,lng:-122.478255},name:"Golden Gate Bridge"},{coords:{lat:37.769268,lng:-122.486278},name:"Golden Gate Park"}],ViewModel=function(){var o=this;o.markers=ko.observableArray([]),o.init=function(){var e=new google.maps.LatLngBounds;o.center=new google.maps.LatLng(37.805316,(-122.44527));var n={center:o.center,mapTypeControl:!0,mapTypeControlOptions:{position:google.maps.ControlPosition.BOTTOM_CENTER,style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR},scaleControl:!0,streetViewControl:!0,streetViewControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},zoom:13,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER}};o.map=new google.maps.Map(document.getElementById("map"),n),$.each(myPlaces,function(n,a){var t=new google.maps.Marker({animation:google.maps.Animation.DROP,listVisible:ko.observable(!0),map:o.map,name:a.name,position:new google.maps.LatLng(a.coords.lat,a.coords.lng)});e.extend(t.position);var s,r,l=[],p=a.name,c="http://en.wikipedia.org/w/api.php?format=json&action=opensearch&search="+p;$.ajax({dataType:"jsonp",success:function(o){i=0;for(var e in o[1])i++,i<=5&&l.push("<li><a target='_blank' href='http://en.wikipedia.org/wiki/"+o[1][e]+"'>"+o[1][e]+"</a></li>"),1===i&&(s=o[2][e])},url:c}).done(function(o){r="<h5>"+p+"</h5> <h6>Wikipedia Description:</h6> <p>"+s+"</p> <p>Wikipedia Articles related to this location:</p><ul>"+l.join("")+"</ul>"}).fail(function(){r="<h5>"+p+"</h5> <p>Ops... Unable to reach Wikipedia info</p>"}),$.ajax({}),o.infowindow=new google.maps.InfoWindow,google.maps.event.addListener(t,"click",function(){o.map.panTo(t.getPosition()),t.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){t.setAnimation(null)},1400),o.infowindow.setContent(r),o.infowindow.open(o.map,this)}),o.markers.push(t)}),google.maps.event.addListener(o.infowindow,"closeclick",function(){o.centerMap()}),o.map.fitBounds(e)},o.setPlace=function(o){google.maps.event.trigger(o,"click")},o.centerMap=function(){o.map.panTo(o.center)},o.searchQuery=ko.observable(""),o.searchQueryFilter=ko.computed(function(){return o.searchQuery().toLowerCase()}),o.searchLoad=ko.computed(function(){var e=o.searchQueryFilter();o.markers().forEach(function(n){var a=n.name.toLowerCase();a.indexOf(e)===-1?n.setMap(null):n.setMap(o.map),a.indexOf(e)===-1?n.listVisible(!1):n.listVisible(!0)})},this),initMap=function(){o.init()},mapsAPIError=function(){alert("Maps API failed to load!")}};$(ko.applyBindings(new ViewModel));
//# sourceMappingURL=main.min.js.map
